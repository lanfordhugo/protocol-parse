# ==================================================================================
# 北京华商三优 充电设备与充电服务平台通信规约 V5.40
# ==================================================================================
meta:
  protocol: beijingSanyou
  version: 1
  default_endian: LE
  notes: 北京华商三优新能源科技有限公司 充电设备与充电服务平台通信规约V5.40-20240710

# ==================================================================================
# 协议兼容性配置
# ==================================================================================
# 帧格式：
# [起始字符 0x68 1字节] [长度域 2字节] [设备类型 1字节] [控制域 2字节] [数据信息 N字节] [校验和 1字节] [结束字符 0x16 1字节]
# 控制域：bit0-11为帧命令符(CMD)，bit12-15为加密类型
compatibility:
  head_len: 6       # 起始1 + 长度2 + 设备类型1 + 控制域2
  tail_len: 2       # 校验1 + 结束1
  frame_head: "68"  # 起始字符
  head_fields:
    - {name: "cmd", offset: 4, length: 2, endian: "little", type: "uint"}  # 控制域（包含CMD）

# ==================================================================================
# 数据类型定义
# ==================================================================================
types:
  # 基础整数类型
  uint8:   { base: uint, bytes: 1, signed: false }
  uint16:  { base: uint, bytes: 2, signed: false }
  uint32:  { base: uint, bytes: 4, signed: false }
  uint64:  { base: uint, bytes: 8, signed: false }
  int8:    { base: int,  bytes: 1, signed: true }
  int16:   { base: int,  bytes: 2, signed: true }
  int32:   { base: int,  bytes: 4, signed: true }
  
  # 字符串类型
  ascii:   { base: str,  encoding: ASCII }
  
  # 十六进制类型
  hex:     { base: hex }
  
  # BCD码类型
  bcd1:    { base: bcd, bytes: 1 }
  bcd2:    { base: bcd, bytes: 2 }
  bcd3:    { base: bcd, bytes: 3 }
  bcd4:    { base: bcd, bytes: 4 }
  bcd6:    { base: bcd, bytes: 6 }
  bcd7:    { base: bcd, bytes: 7 }
  bcd8:    { base: bcd, bytes: 8 }
  
  # 时间类型 - CP56Time2a (7字节)
  cp56time2a: { base: time.cp56time2a, bytes: 7 }

  # 时间类型 - BIN时间格式 (7字节，协议附录D格式)
  # 格式: 世纪(1) + 年(1) + 月(1) + 日(1) + 时(1) + 分(1) + 秒(1)
  # 例如: 0x14YYMMDDHHMMSS，其中0x14是世纪（20，表示2000-2099年）
  bin_time7: { base: time.bin7, bytes: 7 }

# ==================================================================================
# 枚举定义
# ==================================================================================
enums:
  # 设备类型
  device_type:
    1: 直流设备
    2: 交流设备
    3: 负控设备
  
  # ChaoJi类型
  chaoji_type:
    1: 非ChaoJi设备
    2: ChaoJi设备
  
  # V2G类型
  v2g_type:
    1: 非V2G设备
    2: V2G设备
  
  # 板卡分类
  board_type:
    1: 6014板卡
    2: 1778板卡
    3: 复兴版板卡
    4: 复兴简版板卡
    5: 充电岛1.0板卡
    100: 菱形交流板卡
    101: 18款板卡
    102: 20款板卡
    103: 三项交流板卡
  
  # 设备形态
  device_form:
    1: 一体设备
    2: 分体设备
    3: 充电岛设备
  
  # 前后端通信模式
  comm_mode:
    1: 前端通信
    2: 后端通信
  
  # 获取设备信息类型
  info_type:
    1: 设备基本信息
    2: 设备形态信息
  
  # 执行结果
  result_code:
    0: 失败
    1: 成功
  
  # 充电状态
  charge_status:
    0: 空闲
    1: 准备充电
    2: 正在充电
    3: 充电完成
    4: 充电暂停
    5: 充电异常
  
  # 启动方式
  start_type:
    1: 扫码启动
    2: 刷卡启动
    3: VIN启动
    4: 即插即充
    5: 本地启动
  
  # 停机原因
  stop_reason:
    0: 正常停机
    1: 异常停机
  
  # 卡类型/启动标示
  card_type:
    1: 身份卡启动
    2: VIN启动
    3: 余额卡
  
  # 结算标志
  settle_flag:
    1: 未结算
    2: 结算
  
  # 密码标志
  password_flag:
    1: 有密码
    2: 无密码
  
  # 验证结果
  verify_result:
    1: 验证成功
    2: 验证失败
    3: 验证失败余额不足
    4: 验证失败存在未付款订单
    5: 验证失败存在异常订单
    6: 验证失败未知的应用请求
    7: 验证失败该桩尚未投运
    8: 验证失败身份卡无权限
    0xaa: 验证成功重复验证回复
  
  # 卡状态
  card_status:
    1: 合法卡
    2: 非法卡
    3: 未注册
  
  # 预约动作
  reserve_action:
    1: 预约
    2: 取消预约
  
  # 定时启动类型
  timer_start_type:
    1: 平台定时启动
    2: 桩侧定时启动
  
  # 充电接口类型
  interface_type:
    1: 交流
    2: 直流
  
  # 充电桩状态
  pile_status:
    1: 车辆未连接(空闲)
    2: 车辆已连接
    3: 启动中
    4: 启动失败
    5: 充电中
    6: 充电完成
    0x11: 放电中
    0x12: 放电完成
    0x21: 连续充放电中
    0x22: 连续充放电完成
  
  # 预约状态
  reserve_status:
    1: 无预约
    2: 有预约(定时启动)
  
  # 电表类型
  meter_type:
    1: 直流
    2: 交流
  
  # 地锁状态
  lock_status:
    1: 降地锁
    2: 升地锁
    5: 有车辆
    0xEE: 地锁故障
  
  # 启动方式
  start_mode:
    1: APP启动
    2: 刷卡启动
    3: VIN启动
    4: 即插即充
    5: 本地启动
  
  # 开关机控制
  power_control:
    0x01: 开机(小车)
    0x02: 关机(大小车)
    0x04: 开机(大车)
    0x11: 放电开机(小车)
    0x12: 放电关机(大小车)
    0x14: 放电开机(大车)
    0x21: 充放电开机(小车默认)
    0x22: 充放电关机(大小车)
    0x24: 充放电开机(大车)
  
  # 控制状态
  control_status:
    1: 设置成功
    2: 设置失败
  
  # 执行结果
  exec_result:
    1: 执行成功
    2: 执行失败
  
  # 电池类型
  battery_type:
    0x01: 铅酸电池
    0x02: 镍氢电池
    0x03: 磷酸铁锂电池
    0x04: 锰酸锂电池
    0x05: 钴酸锂电池
    0x06: 三元材料电池
    0x07: 聚合物锂离子电池
    0x08: 钛酸锂电池
    0xFF: 其他电池
  
  # 地锁控制
  lock_control:
    1: 升地锁
    2: 降地锁
  
  # 本地限制类型
  local_limit_type:
    1: 本地限制最小金额（充电桩自定义）
    2: 本地不限制
  
  # 充电类型
  charge_type:
    0x01: 无卡充电
    0x02: 有卡充电
  
  # 充电模式
  charge_mode:
    0x1: 恒压
    0x2: 恒流

# ==================================================================================
# 命令定义
# ==================================================================================
cmds:
  # --------------------------------------------------------------------------------
  # 0x010A - 获取设备基本信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x010A:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 获取设备信息类型, type: uint8, enum: info_type}

  # --------------------------------------------------------------------------------
  # 0x010B - 设备基本信息
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x010B:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口个数, type: uint8}
    - {len: 1, name: 模块数量, type: uint8}
    - {len: 2, name: 额定电压, type: uint16, scale: 0.1, unit: V}
    - {len: 2, name: 额定电流, type: uint16, scale: 0.1, unit: A}
    - {len: 1, name: 电表个数, type: uint8}
    - {len: 1, name: 地锁个数, type: uint8}
    - {len: 20, name: 手机编号, type: ascii}
    - {len: 16, name: 通信模块MAC地址, type: ascii}
    - {len: 12, name: 蓝牙MAC地址, type: ascii}
    - {len: 16, name: 蓝牙编号, type: ascii}
    - {len: 8, name: 通讯协议版本号, type: ascii}
    - {len: 8, name: 主控硬件版本号, type: ascii}
    - {len: 8, name: 主控软件版本号, type: ascii}
    - {len: 32, name: 产品标识码, type: ascii}

  # --------------------------------------------------------------------------------
  # 0x0109 - 设备形态信息
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0109:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 设备类型, type: uint8, enum: device_type}
    - {len: 1, name: ChaoJi类型, type: uint8, enum: chaoji_type}
    - {len: 1, name: V2G类型, type: uint8, enum: v2g_type}
    - {len: 1, name: 板卡分类, type: uint8, enum: board_type}
    - {len: 1, name: 设备形态, type: uint8, enum: device_form}
    - {len: 1, name: 前后端通信模式, type: uint8, enum: comm_mode}
    - {len: 16, name: 后端机ID, type: ascii}
    - {len: 1, name: 前端机数量, type: uint8}
    - {len: 1, name: 充电接口个数, type: uint8}
    - {len: 2, name: 枪线最大输出电流, type: uint16, scale: 0.1, unit: A}

  # --------------------------------------------------------------------------------
  # 0x010C - 响应设备基本信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x010C:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 状态, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x010D - 获取子模块基本信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x010D:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x010E - 上报子模块基本信息
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x010E:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 模块数量, type: uint8, id: module_count}
    - repeat_by: module_count
      fields:
        - {len: 1, name: 模块编号, type: uint8}
        - {len: 16, name: 模块序列号, type: ascii}
        - {len: 8, name: 模块软件版本, type: ascii}
        - {len: 8, name: 模块硬件版本, type: ascii}

  # --------------------------------------------------------------------------------
  # 0x010F - 响应子模块基本信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x010F:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 状态, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0110 - 平台与充电设备对时指令
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0110:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 7, name: 平台时间, type: cp56time2a}

  # --------------------------------------------------------------------------------
  # 0x0111 - 充电设备定时上报时间
  # 数据方向：充电设备 → 平台
  # 说明：充电桩每次上电时或与平台建立连接后，主动上报当前时间给平台
  # --------------------------------------------------------------------------------
  0x0111:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 7, name: 充电桩时钟, type: bin_time7}
    - {len: 4, name: 计费模型编号, type: uint32}

  # --------------------------------------------------------------------------------
  # 0x0121 - 主动启动 VIN 认证
  # 数据方向：充电设备 → 平台
  # 说明：用户使用 VIN 方式启动时，充电设备主动上送启动 VIN 认证数据，平台收到 VIN 认证请求后，需回复认证结果应答（0x0122）。
  #       本指令超时时间为 10 秒，超时未收到回复，执行重发动作，最多发送 4 次，如未收到，放弃本次发送，提示用户鉴权失败。
  # --------------------------------------------------------------------------------
  0x0121:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 17, name: VIN号, type: ascii}
    - {len: 1, name: 标示, type: uint8, enum: card_type}
    - {len: 4, name: 卡内余额, type: uint32, scale: 0.01, unit: 元}
    - {len: 1, name: 是否结算, type: uint8, enum: settle_flag}
    - {len: 1, name: 密码标志, type: uint8, enum: password_flag}
    - {len: 16, name: 密码, type: ascii}

  # --------------------------------------------------------------------------------
  # 0x0122 - 主动启动 VIN 认证结果应答
  # 数据方向：平台 → 充电设备
  # 说明：当平台接收到 VIN 认证信息时，判断 VIN 是否有效。之后平台将认证信息备份并将认证结果返回给充电设备。
  #       如设备在 60 秒内重复请求，需按照单次启动生成订单，每次请求均需给予回复，重复请求的回复验证结果需填写 0xaa。
  # --------------------------------------------------------------------------------
  0x0122:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 17, name: VIN号, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 启动标示, type: uint8, enum: card_type}
    - {len: 1, name: 验证结果, type: uint8, enum: verify_result}
    - {len: 1, name: 卡/VIN状态, type: uint8, enum: card_status}
    - {len: 1, name: 密码状态, type: uint8}
    - {len: 1, name: 类型, type: uint8, enum: local_limit_type}
    - {len: 4, name: 账户余额, type: uint32, scale: 0.01, unit: 元}
    - {len: 16, name: 用户ID, type: ascii}

  # --------------------------------------------------------------------------------
  # 0x0123 - 主动启动用户认证
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0123:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号, type: ascii}
    - {len: 1, name: 标示, type: uint8, enum: card_type}
    - {len: 4, name: 卡内余额, type: uint32, scale: 0.01, unit: 元}
    - {len: 1, name: 是否结算, type: uint8, enum: settle_flag}
    - {len: 1, name: 密码标志, type: uint8, enum: password_flag}
    - {len: 16, name: 密码, type: ascii}

  # --------------------------------------------------------------------------------
  # 0x0124 - 主动启动认证结果应答
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0124:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 启动标示, type: uint8, enum: card_type}
    - {len: 1, name: 验证结果, type: uint8, enum: verify_result}
    - {len: 1, name: 卡状态, type: uint8, enum: card_status}
    - {len: 1, name: 密码状态, type: uint8}
    - {len: 1, name: 类型, type: uint8}
    - {len: 4, name: 账户余额, type: uint32, scale: 0.01, unit: 元}
    - {len: 16, name: 用户ID, type: ascii}

  # --------------------------------------------------------------------------------
  # 0x0125 - 预约启动
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0125:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号或用户ID或VIN, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 预约或取消预约, type: uint8, enum: reserve_action}
    - {len: 2, name: 预约等待时间, type: uint16, unit: 分钟}
    - {len: 1, name: 类型, type: uint8}
    - {len: 4, name: 账户余额, type: uint32, scale: 0.01, unit: 元}

  # --------------------------------------------------------------------------------
  # 0x0126 - 预约返回
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0126:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号或用户ID或VIN, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 定时启动类型, type: uint8, enum: timer_start_type}
    - {len: 1, name: 回复预约, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0127 - 平台召唤充电设备遥测信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0127:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x0128 - 充电设备遥测信息上报
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0128:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 充电接口类型, type: uint8, enum: interface_type}
    - {len: 1, name: 充电桩状态, type: uint8, enum: pile_status}
    - {len: 1, name: 充电接口预约状态, type: uint8, enum: reserve_status}
    - {len: 1, name: 电表类型, type: uint8, enum: meter_type}
    - {len: 12, name: 电表地址, type: ascii}
    - {len: 4, name: 电表倍率, type: uint32}
    - {len: 4, name: 电表有功功率, type: uint32, scale: 0.0001, unit: kW}
    - {len: 4, name: 电表无功功率, type: uint32, scale: 0.0001, unit: kVar}
    - {len: 4, name: 电表有功电能, type: uint32, scale: 0.0001, unit: kWh}
    - {len: 4, name: 电表无功电能, type: uint32, scale: 0.0001, unit: kVarh}
    - {len: 2, name: 输入A相电压, type: uint16, scale: 0.1, unit: V}
    - {len: 2, name: 输入B相电压, type: uint16, scale: 0.1, unit: V}
    - {len: 2, name: 输入C相电压, type: uint16, scale: 0.1, unit: V}
    - {len: 2, name: 输入A相电流, type: uint16, scale: 0.1, unit: A}
    - {len: 2, name: 输入B相电流, type: uint16, scale: 0.1, unit: A}
    - {len: 2, name: 输入C相电流, type: uint16, scale: 0.1, unit: A}
    - {len: 1, name: 地锁状态, type: uint8, enum: lock_status}
    - {len: 1, name: 信号强度, type: uint8}
    - {len: 1, name: 充电机环境温度, type: uint8, offset: -50, unit: ℃}
    - {len: 1, name: 充电机环境湿度, type: uint8, unit: "%"}
    - {len: 2, name: 充电导引电压, type: uint16, scale: 0.01, unit: V}

  # --------------------------------------------------------------------------------
  # 0x012A - 充电设备遥信帧数据上报
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x012A:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 充电接口类型, type: uint8, enum: interface_type}
    - {len: 2, name: 故障1, type: uint16}
    - {len: 2, name: 故障2, type: uint16}
    - {len: 2, name: 故障3, type: uint16}
    - {len: 2, name: 故障4, type: uint16}
    - {len: 2, name: 故障5, type: uint16}

  # --------------------------------------------------------------------------------
  # 0x012B - 召唤充电实时充电数据
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x012B:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x012C - 充电实时充电数据
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x012C:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 充电接口类型, type: uint8, enum: interface_type}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 4, name: 本次充电金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 本次充电总电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 本次充电时间, type: uint32, unit: 分钟}
    - {len: 4, name: 尖电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 峰电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 平电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 谷电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 0, name: 遥测数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x018C - 充电实时充电数据(动态时段方案)
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x018C:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 充电接口类型, type: uint8, enum: interface_type}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 4, name: 本次充电金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 本次充电总电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 本次充电时间, type: uint32, unit: 分钟}
    - {len: 1, name: 时段数量, type: uint8, id: period_count}
    - repeat_by: period_count
      fields:
        - {len: 1, name: 时段号, type: uint8}
        - {len: 4, name: 时段电量, type: uint32, scale: 0.001, unit: kWh}
    # 遥测数据（附录A.1直流充电桩遥测数据，变化>50V或>20A亦立即上送）
    - {len: 2, name: 充电输出电压, type: uint16, scale: 0.1, unit: V}
    - {len: 2, name: 充电输出电流, type: uint16, scale: 0.01, unit: A}
    - {len: 1, name: 充电接口温度探头1, type: uint8, offset: -50, unit: "℃"}
    - {len: 1, name: 充电接口温度探头2, type: uint8, offset: -50, unit: "℃"}
    - {len: 1, name: 充电接口温度探头3, type: uint8, offset: -50, unit: "℃"}
    - {len: 1, name: 充电接口温度探头4, type: uint8, offset: -50, unit: "℃"}
    - {len: 2, name: 电压需求, type: uint16, scale: 0.1, unit: V}
    - {len: 2, name: 电流需求, type: uint16, scale: 0.1, offset: -400, unit: A}
    - {len: 1, name: 充电模式, type: uint8}
    - {len: 2, name: 充电电压测量值, type: uint16, scale: 0.1, unit: V}
    - {len: 2, name: 充电电流测量值, type: uint16, scale: 0.1, offset: -400, unit: A}
    - {len: 2, name: 最高单体电压与组号, type: hex}
    - {len: 2, name: 最低单体电压与组号, type: hex}
    - {len: 1, name: 当前SOC, type: uint8, unit: "%"}
    - {len: 2, name: 估算剩余充电时间, type: uint16, unit: 分钟}
    - {len: 1, name: 最高单体电压所在编号, type: uint8}
    - {len: 1, name: 最高动力蓄电池温度, type: uint8, offset: -50, unit: "℃"}
    - {len: 1, name: 最高温度检测点编号, type: uint8}
    - {len: 1, name: 最低动力蓄电池温度, type: uint8, offset: -50, unit: "℃"}
    - {len: 1, name: 最低动力蓄电池温度检测点编号, type: uint8}
    # BMS电池状态 (2字节): Bit1-2:单体电压过高/过低(0x00:正常,0x01:过高,0x10:过低);
    # Bit3-4:SOC过高/过低(0x00:正常,0x01:过高,0x10:过低); Bit5-6:充电过流(0x00:正常,0x01:过流,0x10:不可信);
    # Bit7-8:温度过高(0x00:正常,0x01:过高,0x10:不可信); Bit9-10:绝缘状态(0x00:正常,0x01:不正常,0x10:不可信);
    # Bit11-12:连接器状态(0x00:正常,0x01:不正常,0x10:不可信); Bit13-14:充电允许(0x00:禁止,0x01:允许)
    - {len: 2, name: BMS电池状态, type: hex}
    - {len: 1, name: 设备温度, type: uint8, offset: -50, unit: "℃"}
    - {len: 1, name: 设备湿度, type: uint8, unit: "%"}
    - {len: 2, name: 枪电压, type: uint16, scale: 0.01, unit: V}

  # --------------------------------------------------------------------------------
  # 0x018E - 充电设备上传充电记录(动态时段方案)
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x018E:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 类型, type: uint8, enum: charge_type}
    - {len: 8, name: session_id, type: hex}
    - {len: 2, name: 充电记录序号, type: uint16}
    - {len: 16, name: 用户ID或IC卡号, type: ascii}
    - {len: 17, name: VIN, type: ascii}
    - {len: 4, name: 计费模型编号, type: uint32}
    - {len: 6, name: 电表地址, type: bcd6}
    - {len: 1, name: 时段数, type: uint8, id: period_count}
    - repeat_by: period_count
      fields:
        - {len: 1, name: 时段号, type: uint8}
        - {len: 4, name: 时段起示值, type: uint32, scale: 0.001, unit: kWh}
        - {len: 4, name: 时段止示值, type: uint32, scale: 0.001, unit: kWh}
        - {len: 4, name: 时段电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 总起示值, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 总止示值, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 总电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 本次充电金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 7, name: 开始充电时间, type: bin_time7}
    - {len: 7, name: 结束充电时间, type: bin_time7}
    - {len: 1, name: 停止时OC, type: uint8, unit: "%"}
    - {len: 1, name: 停止时充电模式, type: uint8, enum: charge_mode}
    - {len: 2, name: 停止充电原因, type: uint16}
    - {len: 1, name: 启动原因, type: uint8}
    - {len: 1, name: BMS中止充电原因, type: uint8}
    - {len: 2, name: BMS中止充电故障原因, type: uint16}
    - {len: 1, name: BMS中止充电错误原因, type: uint8}
    - {len: 1, name: 中止荷电状态SOC, type: uint8, unit: "%"}
    - {len: 2, name: 动力蓄电池单体最低电压, type: uint16, scale: 0.01, unit: V}
    - {len: 2, name: 动力蓄电池单体最高电压, type: uint16, scale: 0.01, unit: V}
    - {len: 1, name: 动力蓄电池最低温度, type: uint8, offset: -50, unit: "℃"}
    - {len: 1, name: 动力蓄电池最高温度, type: uint8, offset: -50, unit: "℃"}
    - {len: 1, name: BMS错误报文1, type: uint8}
    - {len: 1, name: BMS错误报文2, type: uint8}
    - {len: 1, name: BMS错误报文3, type: uint8}
    - {len: 1, name: BMS错误报文4, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x016C - 充/放电实时数据
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x016C:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 充电接口类型, type: uint8, enum: interface_type}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 4, name: 本次充电金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 本次放电金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 本次充电总电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 本次放电总电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 本次充放电时间, type: uint32, unit: 分钟}
    - {len: 4, name: 充电尖电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 充电峰电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 充电平电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 充电谷电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 放电尖电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 放电峰电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 放电平电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 放电谷电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 0, name: 遥测数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x019C - 充/放电实时数据(动态时段方案)
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x019C:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 充电接口类型, type: uint8, enum: interface_type}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 4, name: 本次充电金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 本次放电金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 本次充电总电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 本次放电总电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 本次充放电时间, type: uint32, unit: 分钟}
    - {len: 1, name: 充电时段数量, type: uint8, id: charge_period_count}
    - repeat_by: charge_period_count
      fields:
        - {len: 1, name: 充电时段号, type: uint8}
        - {len: 4, name: 充电时段电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 1, name: 放电时段数量, type: uint8, id: discharge_period_count}
    - repeat_by: discharge_period_count
      fields:
        - {len: 1, name: 放电时段号, type: uint8}
        - {len: 4, name: 放电时段电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 0, name: 遥测数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x012D - 召唤充电记录数据
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x012D:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x012E - 充电设备上传充电记录
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x012E:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 充电接口类型, type: uint8, enum: interface_type}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 7, name: 充电开始时间, type: cp56time2a}
    - {len: 7, name: 充电结束时间, type: cp56time2a}
    - {len: 4, name: 充电时长, type: uint32, unit: 分钟}
    - {len: 4, name: 开始SOC, type: uint32}
    - {len: 4, name: 结束SOC, type: uint32}
    - {len: 2, name: 停机原因, type: uint16}
    - {len: 4, name: 本次充电金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 本次充电总电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 尖电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 峰电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 平电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 谷电量, type: uint32, scale: 0.001, unit: kWh}
    - {len: 4, name: 尖金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 峰金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 平金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 谷金额, type: uint32, scale: 0.01, unit: 元}
    - {len: 4, name: 充电前电表读数, type: uint32, scale: 0.01, unit: kWh}
    - {len: 4, name: 充电后电表读数, type: uint32, scale: 0.01, unit: kWh}
    - {len: 1, name: 启动方式, type: uint8, enum: start_mode}
    - {len: 17, name: VIN, type: ascii}

  # --------------------------------------------------------------------------------
  # 0x012F - 响应充电记录确认
  # 数据方向：平台 → 充电设备
  # 说明：后台收到充电桩上传的充电记录后，下发充电记录确认
  # --------------------------------------------------------------------------------
  0x012F:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 2, name: 交易流水号, type: uint16}

  # --------------------------------------------------------------------------------
  # 0x0132 - 充电设备请求平台下发计费模型
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0132:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x0133 - 平台下发计费模型
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0133:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 计费模型数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0134 - 充电设备上传计费模型接收结果
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0134:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 接收结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0135 - 平台查询设备计费模型
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0135:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x0136 - 充电设备上传计费模型更新结果
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0136:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 更新结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0142 - 平台下发负荷调节指令
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0142:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 负荷调节数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0143 - 充电桩响应负荷调节指令
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0143:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 响应结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0144 - 远程启/停充电
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0144:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 开关机控制, type: uint8, enum: power_control}
    - {len: 1, name: 类型, type: uint8, enum: local_limit_type}
    - {len: 4, name: 账户余额, type: uint32, scale: 0.01, unit: 元}

  # --------------------------------------------------------------------------------
  # 0x0145 - 充电设备响应远程启动
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0145:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 开关机控制, type: uint8, enum: power_control}
    - {len: 1, name: 控制状态, type: uint8, enum: control_status}
    - {len: 2, name: 控制失败原因, type: uint16}

  # --------------------------------------------------------------------------------
  # 0x0146 - 充电设备远程启动结果
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0146:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 开关机控制, type: uint8, enum: power_control}
    - {len: 1, name: 执行结果, type: uint8, enum: exec_result}
    - {len: 2, name: 执行失败原因, type: uint16}
    - {len: 3, name: BMS通信协议版本号, type: hex}
    - {len: 1, name: 电池类型, type: uint8, enum: battery_type}
    - {len: 2, name: 整车动力蓄电池系统额定容量, type: uint16, scale: 0.1, unit: Ah}
    - {len: 2, name: 整车动力蓄电池系统额定总电压, type: uint16, scale: 0.1, unit: V}
    - {len: 4, name: 电池生产商名称, type: ascii}
    - {len: 4, name: 电池组序号, type: uint32}
    - {len: 3, name: 电池组生产日期, type: hex}
    - {len: 3, name: 电池组充电次数, type: hex}
    - {len: 1, name: 电池组产权标识, type: uint8}
    - {len: 17, name: VIN, type: ascii}
    - {len: 2, name: 单体动力蓄电池最高允许充电电压, type: uint16, scale: 0.01, unit: V}
    - {len: 2, name: 最高允许充电电流, type: uint16, scale: 0.1, offset: -400, unit: A}
    - {len: 2, name: 动力蓄电池标称总能量, type: uint16, scale: 0.1, unit: kWh}
    - {len: 2, name: 最高允许充电总电压, type: uint16, scale: 0.1, unit: V}
    - {len: 1, name: 最高允许温度, type: uint8, offset: -50, unit: ℃}
    - {len: 2, name: 整车动力蓄电池荷电状态SOC, type: uint16, scale: 0.1, unit: "%"}

  # --------------------------------------------------------------------------------
  # 0x0147 - 远程启停结果响应
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0147:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 确认结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0148 - 远程启/停充电(优惠折扣)
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0148:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 开关机控制, type: uint8, enum: power_control}
    - {len: 1, name: 类型, type: uint8}
    - {len: 4, name: 账户余额, type: uint32, scale: 0.01, unit: 元}
    - {len: 2, name: 折扣比例, type: uint16, scale: 0.01}

  # --------------------------------------------------------------------------------
  # 0x0150 - 远程启动地锁
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0150:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 地锁控制, type: uint8, enum: lock_control}

  # --------------------------------------------------------------------------------
  # 0x0151 - 响应远程启动地锁
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0151:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 16, name: 卡号或用户ID, type: ascii}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 地锁控制, type: uint8, enum: lock_control}
    - {len: 1, name: 控制结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0155 - 上报停车记录
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0155:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 停车记录数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x015F - 响应停车记录确认
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x015F:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 确认结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0162 - 充电设备请求平台下发负荷控制曲线数据
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0162:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x0163 - 平台下发计费模型(充放电)
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0163:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 计费模型数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0164 - 充电设备上传负荷控制曲线数据更新结果
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0164:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 更新结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0165 - 充电桩响应无功功率调节
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0165:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 响应结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0166 - 平台下发无功功率调节指令
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0166:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 无功功率调节数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0167 - 无功功率调节相关数据
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0167:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 无功功率数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0169 - 平台下发负荷控制曲线数据
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0169:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 负荷控制曲线数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0190 - Mifare One卡密钥导入指令
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0190:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 密钥数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0191 - 响应Mifare One卡密钥导入
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0191:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 导入结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0192 - 远程指令控制
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0192:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 控制指令数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0193 - 响应远程指令控制
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0193:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 控制结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0194 - 远程招测设备参数
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0194:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 招测参数, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0195 - 响应远程招测设备参数
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0195:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 参数数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0196 - 远程下发设备参数
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0196:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 参数数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x0197 - 响应远程下发设备参数
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0197:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 下发结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0198 - 平台响应设备参数信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x0198:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 响应结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x0199 - 遥信扩展帧(多器件故障时上传)数据上报
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x0199:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 遥信扩展数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01A0 - 充电设备请求平台下发计费模型(动态时段方案)
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01A0:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x01A1 - 平台下发计费模型(动态时段方案)
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01A1:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 4, name: 计费模型编号, type: uint32}
    - {len: 8, name: 计费模型ID, type: uint64}
    - {len: 7, name: 生效时间, type: cp56time2a}
    - {len: 7, name: 失效时间, type: cp56time2a}
    - {len: 2, name: 预冻结金额第1档, type: uint16, scale: 0.01, unit: 分}
    - {len: 2, name: 预冻结金额第2档, type: uint16, scale: 0.01, unit: 分}
    - {len: 1, name: 时段数N, type: uint8, id: period_count}
    - repeat_by: period_count
      fields:
        - {len: 2, name: 时段起始时间点, type: uint16, unit: hhmm}
        - {len: 1, name: 时段标志, type: uint8}
        - {len: 4, name: 时段电价, type: uint32, scale: 0.00001, unit: 微分}
        - {len: 2, name: 时段服务费, type: uint16, scale: 0.01, unit: 元}


  # --------------------------------------------------------------------------------
  # 0x01A2 - 充电桩本地升级状态同步
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01A2:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 升级状态数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01A3 - 充电桩本地升级状态同步响应
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01A3:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 响应结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01A4 - 平台远程下发二维码
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01A4:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 二维码数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01A5 - 充电桩更新二维码响应
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01A5:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 更新结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01A6 - 设备向平台请求二维码
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01A6:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x01A7 - 平台更新充电中账户余额信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01A7:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 8, name: session_id, type: hex}
    - {len: 4, name: 账户余额, type: uint32, scale: 0.01, unit: 元}
    - {len: 2, name: 折扣比例, type: uint16, scale: 0.01}

  # --------------------------------------------------------------------------------
  # 0x01A8 - 设备响应充电中账户信息更新
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01A8:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 8, name: session_id, type: hex}
    - {len: 1, name: 更新结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01A9 - 平台下发时段ID与时段名信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01A9:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 时段信息数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01AA - 设备响应平台下发时段ID与时段名信息
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01AA:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 响应结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01B0 - 平台下发发卡数据指令
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01B0:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 发卡数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01B1 - 充电设备收到发卡指令回复数据指令
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01B1:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 接收结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01B2 - 充电设备写入完成后发送指令
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01B2:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 写入结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01BA - 远程操作三优M1卡
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01BA:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 操作数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01BB - 响应远程操作三优M1卡
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01BB:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 操作结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01BC - 远程配置卡
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01BC:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 配置数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01BD - 响应远程配置卡
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01BD:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 配置结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01BE - 远程配置(读、写)扩展指令
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01BE:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 配置数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01BF - 响应远程配置(读、写)扩展指令
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01BF:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 响应数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01C0 - 远程批量配置(读、写)扩展指令
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01C0:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 批量配置数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01C1 - 响应远程批量配置(读、写)扩展指令
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01C1:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 响应数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01C2 - 充电设备关键器件生命周期管理数据
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01C2:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 生命周期数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01C3 - 平台召唤充电设备生命周期管理数据
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01C3:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x01C4 - 远程修改充电设备关键器件生命周期管理数据
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01C4:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 生命周期数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01C5 - 响应远程修改充电设备关键器件生命周期管理数据
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01C5:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 修改结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01C6 - 设备远程自诊断
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01C6:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 自诊断指令数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01C7 - 响应远程自诊断
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01C7:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 自诊断结果数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x01C8 - 充电设备关键器件生命周期管理数据应答
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01C8:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 1, name: 应答结果, type: uint8, enum: result_code}

  # --------------------------------------------------------------------------------
  # 0x01D1 - 平台召唤液冷设备遥测信息
  # 数据方向：平台 → 充电设备
  # --------------------------------------------------------------------------------
  0x01D1:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}

  # --------------------------------------------------------------------------------
  # 0x01D2 - 液冷设备遥测信息上报
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x01D2:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: 液冷遥测数据, type: hex, len_to_end: true}

  # --------------------------------------------------------------------------------
  # 0x029A - 上送JJG相关充电订单加密信息
  # 数据方向：充电设备 → 平台
  # --------------------------------------------------------------------------------
  0x029A:
    - {len: 16, name: 桩ID, type: ascii}
    - {len: 1, name: 充电接口编号, type: uint8}
    - {len: 0, name: JJG加密数据, type: hex, len_to_end: true}

# ==================================================================================
# 过滤器配置
# ==================================================================================
filters:
  include_cmds: []
  exclude_cmds: []
